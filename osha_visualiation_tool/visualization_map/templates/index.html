<!DOCTYPE html>
<html lang="en-us">
 
<head>
    <meta charset="utf-8">
    <title>Osha Inspection App </title>          
    {% load static %} 
    <!-- LEAFLET CSS -->
    <link rel="stylesheet" href="{% static "lib/leaflet/leaflet.css" %}"/>
    <link rel="stylesheet"  href="{% static "lib/leaflet-search-master/src/leaflet-search.css" %}">
    <!--GROUPED <link rel="stylesheet"  href="{% static "lib/leaflet-search-master/src/leaflet-search.css" %}"> -->
    <!-- bootstrap -->
    <link rel="stylesheet" href="{% static "lib/bootstrap-4.0.0-dist/css/bootstrap.min.css" %}" />
    <link rel="stylesheet" href="{% static "lib/bootstrap-4.0.0-dist/css/bootstrap.css" %}" />
    <!-- bootstrap -->
    <link rel="stylesheet" href="{% static "lib/Leaflet_markercluster/dist/MarkerCluster.css" %}" />
    <link rel="stylesheet" href="{% static "lib/Leaflet_markercluster/dist/MarkerCluster.Default.css" %}" />

    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.2/leaflet.css"> -->
    <!-- custom css -->
    <link rel="stylesheet" href="{% static "css/style.css" %}" />
</head>
<body>
    <!--BOOTSTRAP NAVBAR-->
    <nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light" >
        <div class="container-fluid">
            <a class="navbar-brand" href="#homearea"><img id="cg-flag" src="{% static "img/worker.png" %}" alt="Home"></a>
            <a class="navbar-brand" ><!-- OSHA Visualization Tool --></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- THESE DO NOT WORK CREATE NEW PAGES -->
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item active">
                      <a class="nav-link" href="#homearea">Home<span class="sr-only">(current)</span>
                      </a>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="#maparea">Map</a></li>
                    <li class="nav-item"><a class="nav-link" href="#dataarea">Chart</a></li>
                    <li class="nav-item"><a class="nav-link" href="#aboutarea">About</a></li>
                </ul>
            </div>
        </div>
    </nav>

            <div class="jumbotron jumbotron-fluid" id="homearea">
            <div class="container-fluid">
                <br>
                <h1>Visualizing Data from Occupational Safety &amp; Health Administration </h1>        
                <h3 class="shadow">An application to investigate data generated by OSHA in the United States in 2017.</h3>
                
            </div>
        </div>





    <div id="maparea">

      <div class="container-fluid">

        <div  class="row" id="dogbox">
            <div class="col-sm-8">
              <small class="visible-sm"><strong> Note:</strong> This site is best viewed on a computer.</small>
              <div id='mapid'></div>
            </div>
            <div class="col-sm-4 sidebar">
              <div class="row">
                <div class="col-xs-12">
                        <p>The following layers were created from an agglomeration of data that the Occupational Safety and Health Administration (OSHA) produces yearly. Three categories exist to track fatalities, severe injuries, and the inspections that occured before or after an incident. To learn more about the aim of this project please see the <a href="#about">about section</a>.</p>
                    </div>

                </div>
                <!-- put stuff in here  -->
                <hr>

                <!--Accordion wrapper-->
                <div class="accordion md-accordion" id="accordionEx1" role="tablist" aria-multiselectable="true">
                  <!-- Accordion card -->
                  <div class="card">
                    <!-- Card header -->
                    <div class="card-header" role="tab" id="headingTwo1">
                      <a class="collapsed" data-toggle="collapse" data-parent="#accordionEx1" href="#collapseTwo1" aria-expanded="false" aria-controls="collapseTwo1">
                        <h5 class="mb-0">
                          Fatalities  <i class="fas fa-angle-down rotate-icon"></i>
                        </h5>
                      </a>
                    </div>

                    <!-- Card body -->
                    <!-- id is the menu option  -->
                    <div id="collapseTwo1" class="collapse" role="tabpanel" aria-labelledby="headingTwo1" data-parent="#accordionEx1">
                      <div class="card-body">
                        <p>All fatalities that occurred in 2017.  <a href="https://www.osha.gov/Publications/fatalfacts.html" target=blank>learn more</a>.</p>
                      </div>
                    </div>

                  </div>
                  <!-- Accordion card -->

                  <!-- Accordion card -->
                  <div class="card">

                    <!-- Card header -->
                    <div class="card-header" role="tab" id="headingTwo2">
                      <a class="collapsed" data-toggle="collapse" data-parent="#accordionEx1" href="#collapseTwo21"
                        aria-expanded="false" aria-controls="collapseTwo21">
                        <h5 class="mb-0">
                          Severe Injuries <i class="fas fa-angle-down rotate-icon"></i>
                        </h5>
                      </a>
                    </div>

                    <!-- Card body -->
                    <div id="collapseTwo21" class="collapse" role="tabpanel" aria-labelledby="headingTwo21" data-parent="#accordionEx1">
                      <div class="card-body">
                        <p>All severe injuries that occurred in 2017.  <a href="https://www.bls.gov/iif/oshoiics.htm" target=blank>learn more</a>.</p>
                      </div>
                    </div>

                  </div>
                  <!-- Accordion card -->

                  <!-- Accordion card -->
                  <div class="card">

                    <!-- Card header -->
                    <div class="card-header" role="tab" id="headingThree31">
                      <a class="collapsed" data-toggle="collapse" data-parent="#accordionEx1" href="#collapseThree31"
                        aria-expanded="false" aria-controls="collapseThree31">
                        <h5 class="mb-0">
                          Inspections <i class="fas fa-angle-down rotate-icon"></i>
                        </h5>
                      </a>
                    </div>

                    <!-- Card body -->
                    <div id="collapseThree31" class="collapse" role="tabpanel" aria-labelledby="headingThree31" data-parent="#accordionEx1">
                      <div class="card-body">
                        <p>Osha has several types of inspection classes, <a href="https://www.osha.gov/OshDoc/data_General_Facts/factsheet-inspections.pdf" target=blank>learn more</a>.</p>
         
                      </div>
                    </div>

                  </div>
                  <!-- Accordion card -->

                </div>
                <!-- Accordion wrapper -->
            </div>
        </div>
    </div>
 </div>

    <div id="dataarea">
      <div class="container-fluid">
        <div  class="row" id="dogbox">
            <div class="col-sm-8">
                <small class="visible-sm"><strong> Note:</strong> Select chart from drop down menu -------></small>
                <div class="chart_container" >
                  <canvas id="lineChart"></canvas>
                  <canvas id="barChart"></canvas>
                  <canvas id="radarChart"></canvas>
                </div>
              </div>
              <div class="col-sm-4 sidebar">
                <div class="row">
                  <select id="chartType">
                    <option disabled selected value> -- select an option -- </option>
                    <option value="line">Hospitalizations & Amputations</option>
                    <option value="bar">Injuries per Body Part</option>
                    <option value="radar">Fatalities Through The Year</option>
                  </select>
                  <div class="col-xs-12">
                    <hr>
                    <h3>Types and Occurrences</h3>
                    <p>Throughout the data are important information when incidents took place and where they occured on the body. Use the dropdown menu to switch between graphs to learn more. </p>
                  </div>
                </div>
              </div>
            </div>
      </div>
    </div>



<hr>


  <div id="aboutarea">
            <div class="container-fluid">
                <div id="about">
                    <h3>About this project</h3>
                    <small class="visible-sm"><strong> Disclaimer:</strong> This tool is not affiliated, nor endorsed by the Occupational Safety and Health Administration (OSHA).</small>

                    <br>
                    <p> OSHA puts out millions of rows of data every year. While they do have an individual incident tool they do not host a detailed data inspection tool to easily visualize output. 
                    The intent of this tool is to aid employers, employees, and interested parties to investigate trends spatially and categorically. </p>
                    <br>

                    <p>All dataets were collected from OSHA's <a href="https://www.osha.gov/oshstats/index.html" target=blank>Data & Statistics page</a>. After collection the data was cleaned and proccessed into a postgres / postgis database for analysis and further transformation for spatial and chart creation formats. The website was built on a Django framework and with a postgres databases. </p>

                    <h3>About the developer</h3>
                    <p>Developed by<a href="https://mistersig.github.io/" target=blank> Sigfrido G.</a> for the University of Wisconsin-Madison's Geography 778 capstone project.</p>
                    <P>Thanks to <a href="https://pixabay.com/users/skeeze-272447/" target=blank>Skeeze</a> for providing imagery</P>

                </div>
            </div>
        </div>
</div>        
<!-- https://www.instagram.com/osha_is_this_ok/?hl=en -->


    <!-- Leaflet JS -->
    <script src= "{% static "lib/leaflet/leaflet.js" %}"></script>
    <!-- choropleth -->
    <script type="text/javascript"  src="{% static "lib/leaflet_choropleth/dist/choropleth.js" %}"></script>
    <!-- <script type="text/javascript"  src="{% static "lib/leaflet_choropleth/src/choropleth.js" %}"></script> -->
    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <!-- Ajax -->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <!-- Cluster JS -->
    <script type="text/javascript" src="{% static "lib/Leaflet_markercluster/dist/leaflet.markercluster-src.js" %}"></script>
    <script type="text/javascript" src="{% static "lib/Leaflet_markercluster/dist/leaflet.markercluster.js" %}"></script>
    <!-- JQUERY -->
    <script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>
    <!-- scrollify -->
    <script type="text/javascript" src="{% static "lib/jquery.scrollify.js" %}"></script>
    <!-- Leaflet Search -->
    <script type="text/javascript" src="{% static "lib/leaflet-search-master/src/leaflet-search.js" %}"></script>
    <!-- Bootstrap JS -->
    <script type="text/javascript" src="{% static "lib/bootstrap-4.0.0-dist/js/bootstrap.min.js" %}"></script>


    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0/dist/Chart.js" integrity="sha256-arMsf+3JJK2LoTGqxfnuJPFTU4hAK57MtIPdFpiHXOU=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0/dist/Chart.min.js" integrity="sha256-Uv9BNBucvCPipKQ2NS9wYpJmi8DTOEfTA/nH2aoJALw=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.bundle.js" integrity="sha256-o8aByMEvaNTcBsw94EfRLbBrJBI+c3mjna/j4LrfyJ8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js" integrity="sha256-oSgtFCCmHWRPQ/JmR4OoZ3Xke1Pw4v50uh6pLcu+fIc=" crossorigin="anonymous"></script>

        <!-- var severe_zip_data = {{ severe_zip_data_17|safe }};
        var fatalities_zip_data = {{ fatalities_zip_data_17|safe }}; -->
    <script type="text/javascript" >

        
        var severe_state_data = {{ severe_state_data_17|safe }};
        var fatalities_states_data = {{ fatalities_states_data_17|safe }};



        var accident_data = {{ accident_data_17|safe }};
        var fat_cat_data = {{ fat_cat_data_17|safe }};
        var follow_up_data = {{ follow_up_data_17|safe }};
        var monitoring_data = {{ monitoring_data_17|safe }};
        var variance_data = {{ variance_data_17|safe }};
        var referrals_data = {{ referrals_data_17|safe }};
        var planned_data = {{ planned_data_17|safe }};
        var complaint_data = {{ complaint_data_17|safe }};

        var fatalities_graph = {{ fatalities_data_17|safe }};
        var hospitalized_graph = {{ hospitalized_data_17|safe }};
        var amputation_graph = {{ amputation_data_17|safe }};        
    

    </script>
    <!-- JS custom script  -->
    <script type="text/javascript" src="{% static "js/script.js" %}"></script>
    <script type="text/javascript" src="{% static "js/charts.js" %}"></script>


</body>

</html>